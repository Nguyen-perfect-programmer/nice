<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chúc Mừng Sinh Nhật</title>
    <style>
        body {
            text-align: center;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(45deg, #FF69B4, #FF6347, #FF4500, #FFD700);
            overflow: hidden;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: row;
            animation: gradientBG 10s ease infinite;
            position: relative;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .sparkle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #FFD700;
            border-radius: 50%;
            animation: sparkleFade 2s linear infinite;
            opacity: 0;
        }

        @keyframes sparkleFade {
            0% { opacity: 0; transform: scale(0.5); }
            50% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0.5) translateY(20px); }
        }

        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            animation: firework 1.5s ease-out forwards;
            z-index: 15;
        }

        @keyframes firework {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            50% { transform: translate(var(--x-offset), var(--y-offset)) scale(1.5); opacity: 0.8; }
            100% { transform: translate(var(--x-offset), var(--y-offset)) scale(0); opacity: 0; }
        }

        .corner-decoration-left, .corner-decoration-right {
            position: fixed;
            width: clamp(40px, 10vw, 60px);
            height: clamp(40px, 10vw, 60px);
            background: radial-gradient(circle, #FF1493, transparent);
            border-radius: 50%;
            z-index: 5;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(20px, 5vw, 30px);
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.8);
            animation: rotateAndGlow 3s infinite ease-in-out, bounceAndGlow 2s infinite ease-in-out;
            overflow: hidden;
        }

        .corner-decoration-left { top: 20px; left: 20px; }
        .corner-decoration-right { top: 20px; right: 20px; }

        @keyframes rotateAndGlow {
            0% { transform: rotate(0deg); box-shadow: 0 0 10px rgba(255, 20, 147, 0.5); }
            50% { transform: rotate(10deg); box-shadow: 0 0 20px rgba(255, 215, 0, 1); }
            100% { transform: rotate(0deg); box-shadow: 0 0 10px rgba(255, 20, 147, 0.5); }
        }

        @keyframes bounceAndGlow {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-10px) scale(1.1); }
        }

        .bubble-from-corner {
            position: absolute;
            width: 15px;
            height: 15px;
            background: rgba(255, 102, 204, 0.7);
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(255, 102, 204, 0.5);
            animation: bubbleRiseFromCorner 2s ease-out forwards;
        }

        @keyframes bubbleRiseFromCorner {
            0% { transform: translate(0, 0) scale(0.5); opacity: 1; }
            100% { transform: translate(50px, -50px) scale(1); opacity: 0; }
        }

        .confetti {
            position: absolute;
            width: 8px;
            height: 8px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="random"><rect x="10" y="10" width="4" height="4" fill="%23FF69B4"/><rect x="12" y="12" width="4" height="4" fill="%23FFD700"/></svg>') no-repeat center;
            background-size: contain;
            animation: confettiFall 3s linear forwards;
        }

        @keyframes confettiFall {
            0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(200px) rotate(360deg); opacity: 0; }
        }

        .wave-from-corner {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .corner-wave {
            position: absolute;
            width: clamp(40px, 10vw, 60px);
            height: clamp(40px, 10vw, 60px);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 50%;
            animation: waveExpandFromCorner 2s ease-out forwards;
            opacity: 0;
        }

        @keyframes waveExpandFromCorner {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        .blink-icon {
            animation: blinkAndScale 1.5s infinite ease-in-out;
        }

        @keyframes blinkAndScale {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        .envelope-container {
            position: relative;
            width: min(90vw, 300px);
            height: min(60vw, 200px);
            cursor: pointer;
            perspective: 1000px;
            transition: all 0.3s ease;
            animation: floatEnvelope 2s ease-in-out infinite;
            z-index: 10;
        }

        .envelope-container:hover {
            transform: scale(1.05);
            animation: none;
        }

        @keyframes floatEnvelope {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .envelope {
            width: 100%;
            height: 100%;
            background: #FFD700;
            position: absolute;
            top: 0;
            left: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 1s ease-in-out;
            transform-origin: top;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 215, 0, 0.7);
            font-size: clamp(20px, 6vw, 24px);
            animation: envelopeGlow 2s infinite alternate;
        }

        @keyframes envelopeGlow {
            0% { box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 215, 0, 0.7); }
            100% { box-shadow: 0 5px 25px rgba(0, 0, 0, 0.4), 0 0 30px rgba(255, 215, 0, 1); }
        }

        .gradient-aura {
            position: absolute;
            width: 120%;
            height: 120%;
            top: -10%;
            left: -10%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.5), transparent);
            animation: gradientPulse 3s ease-in-out infinite;
            z-index: 9;
            border-radius: 15px;
        }

        @keyframes gradientPulse {
            0%, 100% { background: radial-gradient(circle, rgba(255, 215, 0, 0.5), transparent); }
            50% { background: radial-gradient(circle, rgba(255, 105, 180, 0.5), transparent); }
        }

        .star-fall {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .star {
            position: absolute;
            width: 10px;
            height: 10px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="yellow"><path d="M12 2l2.4 7.2h7.6l-6 4.8 2.4 7.2-6-4.8-6 4.8 2.4-7.2-6-4.8h7.6z"/></svg>') no-repeat center;
            background-size: contain;
            animation: starFall 3s linear forwards;
        }

        @keyframes starFall {
            0% { transform: translateY(-50px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(300px) rotate(360deg); opacity: 0; }
        }

        .heart-rise {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        .heart {
            position: absolute;
            font-size: 16px;
            color: #FF69B4;
            animation: heartRise 2s ease-out forwards;
        }

        @keyframes heartRise {
            0% { transform: translateY(0) scale(0.5); opacity: 1; }
            100% { transform: translateY(-100px) scale(1); opacity: 0; }
        }

        .click-hint {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(16px, 4vw, 20px);
            font-weight: bold;
            color: #FFEA00;
            text-shadow: 0 0 15px rgba(255, 234, 0, 0.9), 0 0 25px rgba(255, 234, 0, 0.7);
            animation: hintBlink 1.2s ease-in-out infinite;
            z-index: 10;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 15px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        @supports not (backdrop-filter: blur(5px)) {
            .click-hint {
                background: rgba(0, 0, 0, 0.5);
            }
        }

        @keyframes hintBlink {
            0%, 100% { opacity: 0.6; transform: translateX(-50%) scale(1); }
            50% { opacity: 1; transform: translateX(-50%) scale(1.05); }
        }

        .loading-text {
            color: #FFEA00;
            font-size: clamp(18px, 4vw, 22px);
            font-weight: bold;
            margin-top: 10px;
            text-shadow: 0 0 15px rgba(255, 234, 0, 0.9), 0 0 25px rgba(255, 234, 0, 0.7);
            animation: fadeInOut 1.2s ease-in-out infinite;
            background: rgba(0, 0, 0, 0.3);
            padding: 5px 15px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        @supports not (backdrop-filter: blur(5px)) {
            .loading-text {
                background: rgba(0, 0, 0, 0.5);
            }
        }

        @keyframes fadeInOut {
            0% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 0.6; transform: scale(1); }
        }

        .letter {
            width: clamp(280px, 90vw, 320px);
            height: clamp(180px, 60vw, 220px);
            background: white;
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%) translateY(100%);
            transition: transform 1s ease-in-out, opacity 1s;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(16px, 4vw, 18px);
            color: #333;
            text-align: center;
            font-weight: bold;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            padding: 20px;
            opacity: 0;
        }

        .envelope-container.open .envelope { transform: rotateX(180deg); }
        .envelope-container.open .letter { transform: translateX(-50%) translateY(0); opacity: 1; }

        .card {
            position: relative;
            width: clamp(300px, 90vw, 600px);
            margin: 5vw 2vw;
            padding: clamp(10px, 3vw, 20px);
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3), 0 0 20px rgba(255, 102, 204, 0.5);
            border: 2px solid transparent;
            box-sizing: border-box;
            background-image: url('images/nen.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: none;
            opacity: 0;
            transition: opacity 1s ease-in-out, transform 0.5s ease;
            animation: cardPop 0.8s ease-out forwards;
            overflow: hidden;
            position: relative;
            animation: rainbowGlow 4s ease-in-out infinite;
            z-index: 5;
        }

        @keyframes cardPop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes rainbowGlow {
            0% { border-color: #FF69B4; box-shadow: 0 0 15px #FF69B4; }
            25% { border-color: #FFD700; box-shadow: 0 0 15px #FFD700; }
            50% { border-color: #FF1493; box-shadow: 0 0 15px #FF1493; }
            75% { border-color: #FF4500; box-shadow: 0 0 15px #FF4500; }
            100% { border-color: #FF69B4; box-shadow: 0 0 15px #FF69B4; }
        }

        .glitter-layer, .light-spiral, .balloon-rise {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 4;
        }

        .glitter {
            position: absolute;
            width: 5px;
            height: 5px;
            background: rgba(255, 215, 0, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 215, 0, 1);
            animation: glitterMove 3s linear infinite;
        }

        @keyframes glitterMove {
            0% { transform: translate(0, 0) scale(0.5); opacity: 0; }
            50% { transform: translate(20px, -20px) scale(1); opacity: 1; }
            100% { transform: translate(40px, -40px) scale(0.5); opacity: 0; }
        }

        .card::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            border: 2px dashed #FF69B4;
            border-radius: 20px;
            z-index: -1;
            animation: rotateBorder 10s linear infinite;
        }

        @keyframes rotateBorder {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .spiral {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 50%;
            animation: spiralSpin 4s linear infinite;
            opacity: 0;
        }

        @keyframes spiralSpin {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            100% { transform: scale(2) rotate(360deg); opacity: 0; }
        }

        .balloon {
            position: absolute;
            font-size: 20px;
            animation: balloonRise 5s ease-out forwards;
        }

        @keyframes balloonRise {
            0% { transform: translateY(100%) scale(0.5); opacity: 1; }
            100% { transform: translateY(-200%) scale(1); opacity: 0; }
        }

        .side-decoration {
            width: clamp(80px, 20vw, 120px);
            height: clamp(300px, 80vh, 450px);
            background: linear-gradient(135deg, rgba(255, 20, 147, 0.8), rgba(255, 215, 0, 0.8));
            border-radius: 20px;
            display: none;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(255, 20, 147, 0.7), 0 0 30px rgba(255, 215, 0, 0.7);
            animation: glowPulse 2s infinite alternate;
        }

        @keyframes glowPulse {
            0% { box-shadow: 0 0 20px rgba(255, 20, 147, 0.7), 0 0 30px rgba(255, 215, 0, 0.7); }
            100% { box-shadow: 0 0 30px rgba(255, 20, 147, 1), 0 0 40px rgba(255, 215, 0, 1); }
        }

        .side-decoration.left { margin-right: 2vw; animation: subtleShake 2s ease-in-out infinite; }
        .side-decoration.right { margin-left: 2vw; animation: subtleShake 2s ease-in-out infinite; }

        @keyframes subtleShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .glitter-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: rgba(255, 215, 0, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 215, 0, 1);
            animation: glitterFloat 3s ease-in-out infinite;
        }

        @keyframes glitterFloat {
            0% { transform: translateY(100%) scale(0.5); opacity: 0; }
            50% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-100%) scale(0.5); opacity: 0; }
        }

        .light-ring {
            position: absolute;
            width: clamp(80px, 20vw, 100px);
            height: clamp(80px, 20vw, 100px);
            border: 2px solid rgba(255, 105, 180, 0.5);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: ringExpand 2s ease-out infinite;
            opacity: 0;
        }

        @keyframes ringExpand {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
        }

        .star-particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="yellow"><path d="M12 2l2.4 7.2h7.6l-6 4.8 2.4 7.2-6-4.8-6 4.8 2.4-7.2-6-4.8h7.6z"/></svg>') no-repeat center;
            background-size: contain;
            animation: starSpin 2s linear infinite;
        }

        @keyframes starSpin {
            0% { transform: rotate(0deg) scale(0.5); opacity: 1; }
            50% { transform: rotate(180deg) scale(1); opacity: 0.8; }
            100% { transform: rotate(360deg) scale(0.5); opacity: 1; }
        }

        .spiral-glow {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, rgba(255, 105, 180, 0.8), transparent);
            border-radius: 50%;
            animation: spiralMove 4s ease-in-out infinite;
        }

        @keyframes spiralMove {
            0% { transform: translateY(100%) rotate(0deg); opacity: 0; }
            50% { transform: translateY(0) rotate(180deg); opacity: 1; }
            100% { transform: translateY(-100%) rotate(360deg); opacity: 0; }
        }

        .blink-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: blinkColor 1.5s infinite;
        }

        @keyframes blinkColor {
            0% { background: #FF69B4; box-shadow: 0 0 10px #FF69B4; }
            33% { background: #FFD700; box-shadow: 0 0 10px #FFD700; }
            66% { background: #FF1493; box-shadow: 0 0 10px #FF1493; }
            100% { background: #FF69B4; box-shadow: 0 0 10px #FF69B4; }
        }

        .light-streak {
            position: absolute;
            width: 4px;
            height: 50px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.9), transparent);
            animation: streakRise 2s linear infinite;
        }

        @keyframes streakRise {
            0% { transform: translateY(100%); opacity: 1; }
            100% { transform: translateY(-100%); opacity: 0; }
        }

        .particle-swirl { position: absolute; width: 100%; height: 100%; }
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        .light-wave { position: absolute; width: 100%; height: 100%; }
        .wave {
            position: absolute;
            width: 200%;
            height: 20px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            animation: waveExpand 2s infinite;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.7);
        }

        @keyframes waveExpand {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }

        .image {
            width: 80%;
            max-height: clamp(200px, 50vh, 300px);
            object-fit: contain;
            display: block;
            margin: 0 auto;
            border-radius: 10px;
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1), transform 1.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 1;
            z-index: 6;
            position: relative;
            animation: imageGlow 1.5s infinite alternate;
        }

        @keyframes imageGlow {
            0% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
            100% { box-shadow: 0 0 25px rgba(255, 105, 180, 0.9); }
        }

        .image.fade-out {
            opacity: 0;
            transform: scale(0.9);
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1), transform 1.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .image.fade-in {
            opacity: 1;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.8);
            transition: opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1), transform 1.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            animation: zoomAndRotate 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes zoomAndRotate {
            0% { transform: scale(1.1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
        }

        .image-sparkle {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 5;
        }

        .sparkle-dot {
            position: absolute;
            width: 6px;
            height: 6px;
            background: #FFD700;
            border-radius: 50%;
            opacity: 0;
            animation: sparkleDotFade 1.5s ease-in-out;
        }

        @keyframes sparkleDotFade {
            0% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1.5); }
            100% { opacity: 0; transform: scale(0); }
        }

        .message-smooth {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            font-weight: bold;
            color: #D63384;
            text-shadow: 2px 2px 4px rgba(214, 51, 132, 0.5);
            margin-top: 15px;
            animation: bounceSmooth 2s ease-in-out infinite, glowingText 3s ease-in-out infinite;
            position: relative;
            z-index: 6;
        }

        @keyframes bounceSmooth {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes glowingText {
            0% { color: #D63384; text-shadow: 0 0 10px rgba(214, 51, 132, 0.5); }
            50% { color: #FF1493; text-shadow: 0 0 20px rgba(255, 20, 147, 0.8); }
            100% { color: #D63384; text-shadow: 0 0 10px rgba(214, 51, 132, 0.5); }
        }

        .emoji-line {
            font-size: clamp(24px, 6vw, 40px);
            color: #D63384;
            margin-top: 10px;
            position: relative;
            z-index: 6;
            animation: glowingText 3s ease-in-out infinite;
        }

        .running-text-container {
            background-color: #FFF0F5;
            padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px);
            border-radius: 10px;
            margin-top: 20px;
            overflow: hidden;
            width: 100%;
            height: clamp(50px, 15vw, 60px);
            border: 1px solid #FF66CC;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1), 0 0 15px rgba(255, 102, 204, 0.4);
            box-sizing: border-box;
            position: relative;
            display: flex;
            align-items: center;
            z-index: 6;
        }

        .running-text {
            font-size: clamp(1rem, 3vw, 1.25rem);
            font-weight: bold;
            white-space: nowrap;
            position: absolute;
            color: #FF1493;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            animation: runText linear infinite;
            animation-duration: 15s;
        }

        @keyframes runText {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .toggle-message-btn {
            background: #FF69B4;
            color: white;
            border: none;
            padding: clamp(6px, 2vw, 8px) clamp(12px, 3vw, 16px);
            font-size: clamp(14px, 3vw, 16px);
            cursor: pointer;
            border-radius: 8px;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, background 0.3s ease;
            z-index: 10;
            position: relative;
        }

        .toggle-message-btn:hover {
            transform: scale(1.1);
            background: #FF1493;
        }

        .hidden-message {
            display: none;
            background: #FFF0F5;
            padding: clamp(10px, 3vw, 15px);
            border-radius: 10px;
            margin-top: 15px;
            border: 1px solid #FF66CC;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1), 0 0 15px rgba(255, 102, 204, 0.4);
            font-size: clamp(16px, 4vw, 18px);
            color: #FF1493;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.5s ease-in-out;
            z-index: 6;
            position: relative;
        }

        @keyframes fadeIn {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .glow-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #FFD700;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(255, 215, 0, 1);
            animation: glowBlink 1.5s infinite;
            z-index: 7;
        }

        @keyframes glowBlink {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        .bubble {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 102, 204, 0.7);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 102, 204, 0.5);
            animation: bubbleRise 3s linear forwards;
            z-index: 4;
        }

        @keyframes bubbleRise {
            0% { transform: translateY(100%) scale(0.5); opacity: 1; }
            100% { transform: translateY(-100%) scale(1); opacity: 0; }
        }

        #musicButton {
            position: fixed;
            bottom: 20px;
            right: clamp(20px, 5vw, 40px);
            background: #FF69B4;
            color: white;
            border: none;
            padding: clamp(8px, 2vw, 10px) clamp(16px, 4vw, 20px);
            font-size: clamp(14px, 3vw, 16px);
            cursor: pointer;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: transform 0.3s ease, background 0.3s ease;
            z-index: 10;
        }

        #musicButton:hover {
            transform: scale(1.1);
            background: #FF1493;
        }

        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            z-index: 20;
        }

        .loader {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #FF69B4;
            border-radius: 50%;
            width: clamp(40px, 10vw, 60px);
            height: clamp(40px, 10vw, 60px);
            animation: spin 1s linear infinite;
            z-index: 20;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 600px) {
            .card { padding: 10px; }
            .toggle-message-btn { padding: 6px 12px; font-size: 14px; }
        }
    </style>
</head>
<body>
    <div class="corner-decoration-left blink-icon">🥑</div>
    <div class="corner-decoration-right blink-icon">🥳</div>

    <div class="loading" id="loading">
        <div class="loader"></div>
        <div class="loading-text">Mở nè...</div>
    </div>

    <div class="side-decoration left" id="leftDecoration">
        <div class="particle-swirl" id="particleSwirl"></div>
    </div>
    
    <div class="envelope-container" onclick="openEnvelope()">
        <div class="envelope">📩</div>
        <div class="letter"></div>
        <div class="gradient-aura"></div>
        <div class="star-fall" id="starFall"></div>
        <div class="heart-rise" id="heartRise"></div>
        <div class="click-hint">Chạm vào để mở</div>
    </div>
    
    <div class="card" id="birthdayCard">
        <div class="image-sparkle" id="imageSparkle"></div>
        <img src="images/image.jpg" alt="Happy Birthday" class="image" id="slideshowImage" loading="lazy">
        <p class="message-smooth">Happy BirthDay Nguyễn Trúc Phương</p>
        <p class="emoji-line">🎉🎂🎁</p>
        <div class="running-text-container" id="runningTextContainer">
            <div class="running-text">
                🎉 Hôm nay, thế giới bỗng trở nên rực rỡ hơn bởi vì đây là ngày một thiên thần đã xuất hiện và người đó chính là chị! Chúc chị có một sinh nhật ngập tràn niềm vui, hạnh phúc với những điều kỳ diệu, ngày càng xinh đẹp và tràn đầy yêu thương nháaa 🙈
            </div>
            <div class="glow-dot" style="top: 10%; left: 10%;"></div>
            <div class="glow-dot" style="top: 10%; right: 10%;"></div>
            <div class="glow-dot" style="bottom: 10%; left: 10%;"></div>
            <div class="glow-dot" style="bottom: 10%; right: 10%;"></div>
        </div>
        <button class="toggle-message-btn" onclick="toggleMessage()">Ẩn/Hiện Lời Chúc 💌</button>
        <div class="hidden-message" id="hiddenMessage">
            🎉 Hôm nay, thế giới bỗng trở nên rực rỡ hơn bởi vì đây là ngày một thiên thần đã xuất hiện và người đó chính là chị! Chúc chị có một sinh nhật ngập tràn niềm vui, hạnh phúc với những điều kỳ diệu, ngày càng xinh đẹp và tràn đầy yêu thương nháaa 🙈
        </div>
        <div class="glitter-layer" id="glitterLayer"></div>
        <div class="light-spiral" id="lightSpiral"></div>
        <div class="balloon-rise" id="balloonRise"></div>
    </div>
    
    <div class="side-decoration right" id="rightDecoration">
        <div class="light-wave" id="lightWave"></div>
    </div>

    <audio id="bg-music" loop>
        <source src="audio/birthday_song.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <button id="musicButton" onclick="toggleMusic()">🔊 Bật nhạc</button>

    <script>
        let music = document.getElementById("bg-music");
        let musicButton = document.getElementById("musicButton");
        let isPlaying = false;
        let fireworkInterval;

        document.addEventListener("visibilitychange", () => {
            if (document.hidden && isPlaying) music.pause();
            else if (!document.hidden && isPlaying) music.play();
        });

        function createSparkles() {
            let sparkle = document.createElement("div");
            sparkle.classList.add("sparkle");
            sparkle.style.left = Math.random() * 100 + "vw";
            sparkle.style.top = Math.random() * 100 + "vh";
            sparkle.style.animationDelay = Math.random() * 1 + "s";
            document.body.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 2000);
            setTimeout(createSparkles, 100);
        }
        createSparkles();

        function createStarFall() {
            const starContainer = document.getElementById("starFall");
            function addStar() {
                let star = document.createElement("div");
                star.classList.add("star");
                star.style.left = `${Math.random() * 100}%`;
                star.style.animationDuration = `${2 + Math.random()}s`;
                starContainer.appendChild(star);
                setTimeout(() => star.remove(), 3000);
            }
            setInterval(addStar, 300);
        }

        function createHeartRise() {
            const heartContainer = document.getElementById("heartRise");
            function addHeart() {
                let heart = document.createElement("div");
                heart.classList.add("heart");
                heart.innerHTML = "❤️";
                heart.style.left = `${Math.random() * 100}%`;
                heart.style.animationDuration = `${1.5 + Math.random()}s`;
                heartContainer.appendChild(heart);
                setTimeout(() => heart.remove(), 2000);
            }
            setInterval(addHeart, 500);
        }

        function createBubblesFromCorner() {
            const leftCorner = document.querySelector(".corner-decoration-left");
            const rightCorner = document.querySelector(".corner-decoration-right");
            function addBubbleFromLeft() {
                let bubble = document.createElement("div");
                bubble.classList.add("bubble-from-corner");
                bubble.style.left = "50%";
                bubble.style.top = "50%";
                leftCorner.appendChild(bubble);
                setTimeout(() => bubble.remove(), 2000);
            }
            function addBubbleFromRight() {
                let bubble = document.createElement("div");
                bubble.classList.add("bubble-from-corner");
                bubble.style.left = "50%";
                bubble.style.top = "50%";
                rightCorner.appendChild(bubble);
                setTimeout(() => bubble.remove(), 2000);
            }
            setInterval(addBubbleFromLeft, 400);
            setInterval(addBubbleFromRight, 400);
        }

        function createConfettiFromCorner() {
            const leftCorner = document.querySelector(".corner-decoration-left");
            const rightCorner = document.querySelector(".corner-decoration-right");
            function addConfettiFromLeft() {
                let confetti = document.createElement("div");
                confetti.classList.add("confetti");
                confetti.style.left = `${Math.random() * 60}px`;
                confetti.style.top = "0";
                confetti.style.animationDuration = `${2 + Math.random()}s`;
                leftCorner.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
            function addConfettiFromRight() {
                let confetti = document.createElement("div");
                confetti.classList.add("confetti");
                confetti.style.left = `${Math.random() * 60}px`;
                confetti.style.top = "0";
                confetti.style.animationDuration = `${2 + Math.random()}s`;
                rightCorner.appendChild(confetti);
                setTimeout(() => confetti.remove(), 3000);
            }
            setInterval(addConfettiFromLeft, 300);
            setInterval(addConfettiFromRight, 300);
        }

        function createWavesFromCorner() {
            const leftCorner = document.querySelector(".corner-decoration-left");
            const rightCorner = document.querySelector(".corner-decoration-right");
            function addWaveFromLeft() {
                let wave = document.createElement("div");
                wave.classList.add("corner-wave");
                leftCorner.appendChild(wave);
                setTimeout(() => wave.remove(), 2000);
            }
            function addWaveFromRight() {
                let wave = document.createElement("div");
                wave.classList.add("corner-wave");
                rightCorner.appendChild(wave);
                setTimeout(() => wave.remove(), 2000);
            }
            setInterval(addWaveFromLeft, 500);
            setInterval(addWaveFromRight, 500);
        }

        function createFirework(x, y) {
            const colors = ['#FF1461', '#FFD700', '#18FF92', '#5A87FF', '#FF69B4'];
            for (let i = 0; i < 20; i++) {
                let firework = document.createElement("div");
                firework.classList.add("firework");
                firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                firework.style.left = x + "px";
                firework.style.top = y + "px";
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 100;
                const xOffset = Math.cos(angle) * distance;
                const yOffset = Math.sin(angle) * distance;
                firework.style.animation = `firework ${1 + Math.random()}s ease-out forwards`;
                firework.style.setProperty('--x-offset', xOffset + 'px');
                firework.style.setProperty('--y-offset', yOffset + 'px');
                document.body.appendChild(firework);
                setTimeout(() => firework.remove(), 1500);
            }
        }

        function startFireworks(cardRect) {
            fireworkInterval = setInterval(() => {
                createFirework(cardRect.left + Math.random() * cardRect.width, 
                              cardRect.top + Math.random() * cardRect.height);
            }, 500);
        }

        function createGlitter() {
            const glitterLayer = document.getElementById("glitterLayer");
            function addGlitter() {
                let glitter = document.createElement("div");
                glitter.classList.add("glitter");
                glitter.style.left = `${Math.random() * 100}%`;
                glitter.style.top = `${Math.random() * 100}%`;
                glitter.style.animationDelay = `${Math.random() * 2}s`;
                glitterLayer.appendChild(glitter);
                setTimeout(() => glitter.remove(), 3000);
            }
            setInterval(addGlitter, 300);
        }

        function createLightSpiral() {
            const spiralContainer = document.getElementById("lightSpiral");
            function addSpiral() {
                let spiral = document.createElement("div");
                spiral.classList.add("spiral");
                spiral.style.left = `${Math.random() * 100}%`;
                spiral.style.top = `${Math.random() * 100}%`;
                spiral.style.animationDelay = `${Math.random() * 2}s`;
                spiralContainer.appendChild(spiral);
                setTimeout(() => spiral.remove(), 4000);
            }
            setInterval(addSpiral, 500);
        }

        function createBalloons() {
            const balloonContainer = document.getElementById("balloonRise");
            const balloonEmojis = ["🎈", "🎈", "🎈", "🎈"];
            function addBalloon() {
                let balloon = document.createElement("div");
                balloon.classList.add("balloon");
                balloon.innerHTML = balloonEmojis[Math.floor(Math.random() * balloonEmojis.length)];
                balloon.style.left = `${Math.random() * 100}%`;
                balloon.style.animationDuration = `${3 + Math.random() * 2}s`;
                balloonContainer.appendChild(balloon);
                setTimeout(() => balloon.remove(), 5000);
            }
            setInterval(addBalloon, 1000);
        }

        const images = ["images/image.jpg", "images/image2.jpg", "images/image1.jpg"];
        let currentImageIndex = 0;
        const slideshowImage = document.getElementById("slideshowImage");
        const imageSparkle = document.getElementById("imageSparkle");

        function changeImage() {
            const oldImage = slideshowImage;
            oldImage.classList.add('fade-out');
            createImageSparkles();
            setTimeout(() => {
                let newIndex;
                do {
                    newIndex = Math.floor(Math.random() * images.length);
                } while (newIndex === currentImageIndex);
                currentImageIndex = newIndex;
                oldImage.src = images[currentImageIndex];
                oldImage.classList.remove('fade-out');
                oldImage.classList.add('fade-in');
                setTimeout(() => oldImage.classList.remove('fade-in'), 1200);
            }, 1200);
        }

        function createImageSparkles() {
            const sparkleContainer = document.getElementById("imageSparkle");
            sparkleContainer.innerHTML = '';
            for (let i = 0; i < 10; i++) {
                let sparkle = document.createElement("div");
                sparkle.classList.add("sparkle-dot");
                const angle = (i / 10) * Math.PI * 2;
                const radius = 50 + Math.random() * 50;
                const x = 50 + Math.cos(angle) * radius;
                const y = 50 + Math.sin(angle) * radius;
                sparkle.style.left = `${x}%`;
                sparkle.style.top = `${y}%`;
                sparkle.style.animationDelay = `${Math.random() * 0.5}s`;
                sparkleContainer.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 1500);
            }
        }

        function startSlideshow() {
            setInterval(changeImage, 4000);
        }

        function createParticleSwirl() {
            const swirl = document.getElementById("particleSwirl");
            for (let i = 0; i < 20; i++) {
                let particle = document.createElement("div");
                particle.classList.add("particle");
                const angle = (i / 20) * Math.PI * 2;
                const radius = 40 + Math.random() * 20;
                const x = 50 + Math.cos(angle) * radius;
                const y = 50 + Math.sin(angle) * radius;
                particle.style.left = `${x}%`;
                particle.style.top = `${y}%`;
                particle.style.animation = `swirl ${2 + Math.random()}s infinite linear`;
                particle.style.animationDelay = `${Math.random() * 2}s`;
                swirl.appendChild(particle);
            }
        }

        const styleSheet = document.styleSheets[0];
        styleSheet.insertRule(`
            @keyframes swirl {
                0% { transform: translate(-50%, -50%) rotate(0deg); }
                100% { transform: translate(-50%, -50%) rotate(360deg); }
            }
        `, styleSheet.cssRules.length);

        function createLightWave() {
            const waveContainer = document.getElementById("lightWave");
            function addWave() {
                let wave = document.createElement("div");
                wave.classList.add("wave");
                wave.style.animationDelay = `${Math.random() * 1}s`;
                waveContainer.appendChild(wave);
                setTimeout(() => wave.remove(), 2000);
            }
            setInterval(addWave, 500);
        }

        function createBubbles() {
            const card = document.getElementById("birthdayCard");
            function addBubble() {
                let bubble = document.createElement("div");
                bubble.classList.add("bubble");
                bubble.style.left = `${Math.random() * 100}%`;
                bubble.style.animationDuration = `${2 + Math.random()}s`;
                card.appendChild(bubble);
                setTimeout(() => bubble.remove(), 3000);
            }
            setInterval(addBubble, 300);
        }

        function enhanceLeftDecoration() {
            const leftDecoration = document.getElementById("leftDecoration");
            function addGlitterParticle() {
                let particle = document.createElement("div");
                particle.classList.add("glitter-particle");
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 2}s`;
                leftDecoration.appendChild(particle);
                setTimeout(() => particle.remove(), 3000);
            }
            setInterval(addGlitterParticle, 300);
            function addLightRing() {
                let ring = document.createElement("div");
                ring.classList.add("light-ring");
                ring.style.animationDelay = `${Math.random() * 1}s`;
                leftDecoration.appendChild(ring);
                setTimeout(() => ring.remove(), 2000);
            }
            setInterval(addLightRing, 600);
            function addStarParticle() {
                let star = document.createElement("div");
                star.classList.add("star-particle");
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 1}s`;
                leftDecoration.appendChild(star);
                setTimeout(() => star.remove(), 2000);
            }
            setInterval(addStarParticle, 400);
            function addSpiralGlow() {
                let spiral = document.createElement("div");
                spiral.classList.add("spiral-glow");
                spiral.style.left = `${Math.random() * 80 + 10}%`;
                spiral.style.animationDelay = `${Math.random() * 2}s`;
                leftDecoration.appendChild(spiral);
                setTimeout(() => spiral.remove(), 4000);
            }
            setInterval(addSpiralGlow, 700);
            function addBlinkParticle() {
                let blink = document.createElement("div");
                blink.classList.add("blink-particle");
                blink.style.left = `${Math.random() * 100}%`;
                blink.style.top = `${Math.random() * 100}%`;
                blink.style.animationDelay = `${Math.random() * 1}s`;
                leftDecoration.appendChild(blink);
                setTimeout(() => blink.remove(), 1500);
            }
            setInterval(addBlinkParticle, 500);
            function addLightStreak() {
                let streak = document.createElement("div");
                streak.classList.add("light-streak");
                streak.style.left = `${Math.random() * 100}%`;
                streak.style.animationDelay = `${Math.random() * 1}s`;
                leftDecoration.appendChild(streak);
                setTimeout(() => streak.remove(), 2000);
            }
            setInterval(addLightStreak, 600);
        }

        function enhanceRightDecoration() {
            const rightDecoration = document.getElementById("rightDecoration");
            function addGlitterParticle() {
                let particle = document.createElement("div");
                particle.classList.add("glitter-particle");
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 2}s`;
                rightDecoration.appendChild(particle);
                setTimeout(() => particle.remove(), 3000);
            }
            setInterval(addGlitterParticle, 300);
            function addLightRing() {
                let ring = document.createElement("div");
                ring.classList.add("light-ring");
                ring.style.animationDelay = `${Math.random() * 1}s`;
                rightDecoration.appendChild(ring);
                setTimeout(() => ring.remove(), 2000);
            }
            setInterval(addLightRing, 600);
            function addStarParticle() {
                let star = document.createElement("div");
                star.classList.add("star-particle");
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.animationDelay = `${Math.random() * 1}s`;
                rightDecoration.appendChild(star);
                setTimeout(() => star.remove(), 2000);
            }
            setInterval(addStarParticle, 400);
            function addSpiralGlow() {
                let spiral = document.createElement("div");
                spiral.classList.add("spiral-glow");
                spiral.style.left = `${Math.random() * 80 + 10}%`;
                spiral.style.animationDelay = `${Math.random() * 2}s`;
                rightDecoration.appendChild(spiral);
                setTimeout(() => spiral.remove(), 4000);
            }
            setInterval(addSpiralGlow, 700);
            function addBlinkParticle() {
                let blink = document.createElement("div");
                blink.classList.add("blink-particle");
                blink.style.left = `${Math.random() * 100}%`;
                blink.style.top = `${Math.random() * 100}%`;
                blink.style.animationDelay = `${Math.random() * 1}s`;
                rightDecoration.appendChild(blink);
                setTimeout(() => blink.remove(), 1500);
            }
            setInterval(addBlinkParticle, 500);
            function addLightStreak() {
                let streak = document.createElement("div");
                streak.classList.add("light-streak");
                streak.style.left = `${Math.random() * 100}%`;
                streak.style.animationDelay = `${Math.random() * 1}s`;
                rightDecoration.appendChild(streak);
                setTimeout(() => streak.remove(), 2000);
            }
            setInterval(addLightStreak, 600);
        }

        function toggleMessage() {
            const hiddenMessage = document.getElementById("hiddenMessage");
            const runningTextContainer = document.getElementById("runningTextContainer");
            if (hiddenMessage.style.display === "block") {
                hiddenMessage.style.display = "none";
                runningTextContainer.style.display = "flex";
            } else {
                hiddenMessage.style.display = "block";
                runningTextContainer.style.display = "none";
            }
        }

        function openEnvelope() {
            let envelopeContainer = document.querySelector(".envelope-container");
            let birthdayCard = document.getElementById("birthdayCard");
            let loading = document.getElementById("loading");
            let leftDecoration = document.getElementById("leftDecoration");
            let rightDecoration = document.getElementById("rightDecoration");

            if (!envelopeContainer.classList.contains("open")) {
                envelopeContainer.classList.add("open");
                loading.style.display = "block";
                setTimeout(() => {
                    envelopeContainer.style.display = "none";
                    loading.style.display = "none";
                    birthdayCard.style.display = "block";
                    leftDecoration.style.display = "block";
                    rightDecoration.style.display = "block";
                    const cardRect = birthdayCard.getBoundingClientRect();
                    createFirework(cardRect.left + cardRect.width/2, cardRect.top + cardRect.height/2);
                    setTimeout(() => { 
                        birthdayCard.style.opacity = "1"; 
                        leftDecoration.style.opacity = "1";
                        rightDecoration.style.opacity = "1";
                        playMusic();
                        startSlideshow();
                        createParticleSwirl();
                        createLightWave();
                        createBubbles();
                        createGlitter();
                        createLightSpiral();
                        createBalloons();
                        startFireworks(cardRect);
                        enhanceLeftDecoration();
                        enhanceRightDecoration();
                    }, 200);
                }, 1000);
            }
        }

        function playMusic() {
            music.play().catch(error => console.log("Trình duyệt chặn tự động phát nhạc:", error));
            isPlaying = true;
            musicButton.innerHTML = "🔇 Tắt Nhạc";
        }

        function toggleMusic() {
            if (isPlaying) {
                music.pause();
                isPlaying = false;
                musicButton.innerHTML = "🔊 Bật Nhạc";
            } else {
                music.play();
                isPlaying = true;
                musicButton.innerHTML = "🔇 Tắt Nhạc";
            }
        }

        createStarFall();
        createHeartRise();
        createBubblesFromCorner();
        createConfettiFromCorner();
        createWavesFromCorner();
    </script>
</body>
</html>
